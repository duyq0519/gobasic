# Git仓库

## 取得项目的 Git 仓库
 有两种方式可以取得Git的仓库，一种是通过命令生成一个空白的仓库，一种是从其他仓库克隆一个新的仓库
```
 git init .
 git clone git://github.com/schacon/grit.git mygit
```
克隆方式后面会有更具体的讲解
## 记录每次更新到仓库
现在我们已经有了一个空白的仓库，接下来我们创建一些文件，然后对文件进行一些修改，完成目标后将文件保存起来。

Git仓库中的文件无外乎有两种状态，‘已跟踪和未跟踪’。已跟踪就是已经纳入版本管理的文件，上次更新已经有了该文件的记录。工作一段时间后，它的状态可能是‘未修改’，‘已修改’，‘已暂存’这几种状态。
### 检查文件状态
```
git status
```
如果创建一个空白文件README, 将此文件加入跟踪,可以使用```git add```，这个命令是个多功能命令，可以将文件加入暂存，可以已跟踪的文件放入暂存区，或者将有冲突的文件标记为已解决状态
```
git add README
```
如果此时再次修改README，再次运行```git status```,会看到README文件出现了两次
```
On branch master
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

	modified:   README

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

	modified:   README
```

```git status``` 会将当前文件在当前状态下的版本纳入已暂存，再次修改会将文件修改为已修改状态。所以出现了两次

### 忽略某些文件
通过创建.gitignore文件，可以将用一些文件忽略，下面是一些忽略的列子

```
 # 此为注释 – 将被 Git 忽略

 # 忽略所有 .a 结尾的文件
 *.a

 # 但 lib.a 除外
 !lib.a

 # 仅仅忽略项目根目录下的 TODO 文件，不包括 subdir/TODO
 /TODO

 # 忽略 build/ 目录下的所有文件
 build/

 # 会忽略 doc/notes.txt 但不包括 "doc/server/arch.txt"
 doc/*.txt
```
### 查看已暂存的和未暂存的更新
```git status ```列出了哪些文件没有加入暂存，哪些文件修改了，新增了哪些文件等等，但是并没有详细的给出具体修改了哪些地方。```git diff ``` 命令会用补丁的形式给出具体删除或者修改了哪些行。
```
diff --git a/README b/README
index 1b27fd1..c387460 100644
--- a/README
+++ b/README
@@ -1,2 +1 @@
 hello README
-HELLO 
```
上面的命名```git diff``` 给出了工作目录中的文件和已暂存文件的差异。·```git diff --cached ``` 查询已经暂存的文件和上次提交的快照之间的差异。

如果一次将所有的文件纳入已暂存，那么直接运行```git status```将没有任何的输出

### 提交更新
提交更新使用
```
git commit -m "Story 182: Fix benchmarks for speed"
```
也可以跳过暂存步骤，直接commit, 将所有的文件提交
```
git commit -a -m "Story 182: Fix benchmarks for speed"
```

### 移除文件
如果有个文件不想再纳入版本控制，常见的就是gitignore中的文件不消息加入了暂存，导致gitignore无效，这个时候就可以使用下面的命令将次文件从暂存中删除。
```
git rm README
```

### 移动文件
有时候在项目开发中需要将某个文件的名字修改下，如果直接使用系统的命令重命名，会导致一个新的文件的诞生，一个老文件的删除。对于其他开发者，需要花精力理解这两个操作。在Git中可以使用下面的命令移动文件
```
git mv file_from file_to
```
再次运行```git status```可以很清楚的看到重命名的操作
```
On branch master
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

	renamed:    README -> README.md
```

##  远程仓库的使用
远程仓库的使用是分布式开发的关键仓库

### 查看当前的远程库
查看当前的远程仓库
```
git remote
```
如果需要查看具体远程仓库的地址
```
git remote -v
```
### 添加远程仓库
在新建一个空白的仓库后可以添加一个新远程仓库，然后拉取数据，这里的shortname没有严格的规定，不过在克隆一个仓库的时候，会默认添加一个’origin‘名字的远程仓库。
```
git remote add [shortname] [url]：
```
### 从远程仓库抓取数据
```
git fetch [remote-name]
```
这个命令会抓取所有分支的数据，但是不会合并分支，需要```git merge origin branch_name```才会将远程仓库的某个分支上的代码合并到现在的分支
```
git fetch [remote-name]  [branch_name]
```
这个命令会拉取远程仓库上的指定分支到本地仓库
### 推送数据到远程仓库
```
git push [remote-name] [branch-name]
```
使用此命令需要有推送的权限，如果远程仓库没有对应的分支，还会问你要不要建立新的远程分支。还需要设置推送者的用户邮箱和密码才能推送。

### 查看远程仓库的信息
```
git remote show [remote-name]
```
除了对应的克隆地址外，它还给出了许多额外的信息。它友善地告诉你如果是在 master 分支，就可以用 git pull 命令抓取数据合并到本地。另外还列出了所有处于跟踪状态中的远端分支。


### 远程仓库的删除与重命名
重命名
```
git remote rename pb paul
```
删除
```
git remote rm paul
```


